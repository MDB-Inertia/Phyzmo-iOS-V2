//
//  GraphViewController.swift
//  Phyzmo
//
//  Created by Athena Leong on 11/9/19.
//  Copyright Â© 2019 Athena. All rights reserved.
//

import UIKit
import Charts

class GraphViewController: UIViewController {

    @IBOutlet weak var chartView: LineChartView!
    @IBOutlet weak var chartButton: UIButton!
    
    var chatStatus = 0
    
    var time = [0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2.0, 2.1,
                2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8, 2.9, 3.0, 3.1, 3.2, 3.3, 3.4, 3.5, 3.6, 3.7, 3.8, 3.9, 4.0, 4.1, 4.2, 4.3, 4.4, 4.5,
                4.6, 4.7, 4.8, 4.9, 5.0, 5.1, 5.2, 5.3, 5.4, 5.5, 5.6, 5.7, 5.8, 5.9, 6.0, 6.1, 6.2, 6.3, 6.4, 6.5, 6.6, 6.7, 6.8, 6.9,
                7.0, 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 7.7, 7.8, 7.9, 8.0, 8.1, 8.2, 8.3, 8.4, 8.5, 8.6, 8.7, 8.8, 8.9, 9.0, 9.1, 9.2, 9.3,
                9.4, 9.5, 9.6, 9.7, 9.8, 9.9, 10.0, 10.1, 10.2, 10.3, 10.4, 10.5, 10.6, 10.7, 10.8, 10.9, 11.0, 11.1, 11.2, 11.3, 11.4,
                11.5, 11.6, 11.7, 11.8]
    
    var pre_distance = [0, 0.0009336153673887468, 0.002014160689752864, 0.0027869000033226314, 0.004578216285357147,
                          0.004583497032969736, 0.005370394046870857, 0.005933005966032231, 0.006823440208433692, 0.007874826073328097,
                          0.008228976413191117, 0.009499407112831745, 0.010453255995564537, 0.011482665452863808, 0.013553764008400328,
                          0.01495956974482397, 0.016403446550675993, 0.01719914409976302, 0.018793080212115197, 0.02174093303771122,
                          0.025119989169463106, 0.028480272799165242, 0.03138604142939139, 0.03259214401070761, 0.033676682093052177,
                          0.03623824623892138, 0.03896268665320323, 0.0414194454879794, 0.0443259702457781, 0.046627128578041646,
                          0.04881863725581021, 0.05156959652375367, 0.0546605444235745, 0.057731867181741815, 0.0596763405625626,
                          0.06231897923513986, 0.06608154289247699, 0.06947610802485354, 0.07296592903817727, 0.07554510843746112,
                          0.0785474460485984, 0.0833206337955321, 0.08746802170325789, 0.0913647161575971, 0.094709548070668, 0.09846995501309366,
                          0.10155055911330041, 0.106112800719567, 0.10995150247172626, 0.11380841849535982, 0.11823183008408943,
                          0.12243852423715922, 0.1271814636606311, 0.13175594087697365, 0.1367781576465843, 0.14175729620755573,
                          0.14624958977225883, 0.1505910261713721, 0.15506773952449363, 0.16010042936839436, 0.16517234888019036,
                          0.17065388837500264, 0.17538922225067596, 0.18069177270304337, 0.18576768485477985, 0.19148166197959246,
                          0.19709823395310377, 0.20240303607539278, 0.2074515955129294, 0.21317909913646207, 0.2195925155585756,
                          0.22700196816247156, 0.23427782094767693, 0.24040516150292693, 0.24688038371514465, 0.25272090546623427,
                          0.25879863532948355, 0.2653346107259517, 0.27099644621007096, 0.27676917172610305, 0.285721338606472,
                          0.29398450015450484, 0.3014156585135975, 0.3094437946421401, 0.3169113613159066, 0.3233456963484694,
                          0.33065265123470994, 0.3382365955278644, 0.34647228514188105, 0.35289524360961516, 0.3597173849899386,
                          0.3672616456778081, 0.37572939293465324, 0.38321309036777085, 0.3914763043345739, 0.3997491986464821,
                          0.40855785065982203, 0.4169110907528645, 0.42626642531610326, 0.43556930665621235, 0.44332399853183674,
                          0.45126695058560073, 0.4602227181005358, 0.4687151971937078, 0.47600359686042426, 0.48261897140792925,
                          0.4925233540660505, 0.5025538094603301, 0.5121477110456412, 0.5217509936709485, 0.5304951228849353, 0.5396541463047234,
                          0.5482786820151615, 0.5581005156445437, 0.5679777322642369, 0.5775165091113429, 0.5874880013619496, 0.5964660895944635,
                          0.6028503169598336]
    
    var pre_velocity = [0.0,
                        0.0031120512246291553, 0.005573800006645262, 0.0065478529042424785, 0.006592228851146922, 0.007158932793934633,
                        0.007307236240639803, 0.007655110301909205, 0.008799746908719984, 0.009052181105138432, 0.010352825256052963,
                        0.012382727303984887, 0.013036857604283046, 0.013421572681081993, 0.014282567409648065, 0.01504100921872311,
                        0.01562715046174353, 0.016494819194783374, 0.016842967360848612, 0.01781438667303937, 0.01842563620425881,
                        0.019376891580356305, 0.020303270257243804, 0.020951054258105038, 0.021655673616238165, 0.02231537617556075,
                        0.023101608346633818, 0.023955625613995214, 0.02486970108904487, 0.025523902740910525, 0.026245972027605632,
                        0.02708791878968296, 0.027798734262006675, 0.028579352534267535, 0.029333773344259823, 0.030025225230487614,
                        0.031096160022256385, 0.03205402153372359, 0.03282089681379666, 0.033586659585563505, 0.03416903354643247,
                        0.035419819295723486, 0.03640515231084002, 0.03716617199407695, 0.03800411185706342, 0.03877969709995771,
                        0.039490499535248184, 0.040338220038712715, 0.04121125759242083, 0.04211223138917823, 0.04312567392635765,
                        0.04381232529957288, 0.04463954258987692, 0.045104576767096186, 0.04610585407892937, 0.04700459402440976,
                        0.04775700409776313, 0.04853047962126464, 0.04936038539413185, 0.050123200806257415, 0.05065969050082633,
                        0.0513535176299214, 0.05202366092821532, 0.05287432946132411, 0.053696115022648615, 0.054552416563912125,
                        0.055364211305071846, 0.056123481233469795, 0.05693658936011235, 0.05782744918294238, 0.05835659876670405,
                        0.05891384283818988, 0.05991301419650327, 0.060633078527594635, 0.061376301836709356, 0.06225075052854192,
                        0.0630103186823286, 0.06390282075262008, 0.06467093663462124, 0.06541782566934025, 0.06636745201408037,
                        0.06693276561773706, 0.06775210251855536, 0.06867119970500449, 0.06942236823776154, 0.07023456331532518,
                        0.07099535123868689, 0.07170340912511522, 0.07247630590278958, 0.07340697990743274, 0.07418270645417677,
                        0.07499317451037847, 0.07583320583728247, 0.07655699679372255, 0.07752916106802038, 0.07821587783699137,
                        0.07841968000258646, 0.07910442960993082, 0.08001201898380227, 0.0809399684755518, 0.08131512265470803,
                        0.08146882660709072, 0.08169684446969332, 0.08248414112882523, 0.08270259090901684, 0.08383894205858436,
                        0.08411886075006665, 0.08454960505010377, 0.08447498534783096, 0.0840875674493953, 0.0839612202252614,
                        0.08389858756429269, 0.0845644800662728, 0.0848668945336791, 0.08245691446744756, 0.08039466008322022,
                        0.07795947849238842, 0.06974516939119332, 0.051207718659613315]
    
    var pre_acce = [0.0, 0.3112051224629155,
                    0.15454786271395346, 0.0007543925160838112, 0.06251243546237471, 0.09558053317221839, 0.09772543843389397,
                    0.06862729715328439, 0.08269445508374354, 0.04187881837300129, 0.14037394407600132, 0.14609928824791887,
                    0.048244103252648614, 0.09487274614330313, 0.0847158218888327, 0.074230913943985, 0.08336240205889212,
                    0.08775207880478032, 0.07142266682641209, 0.08704013159939836, 0.0629068146166791, 0.1110043662077612,
                    0.08659321009642734, 0.08000865834948269, 0.09310697155646044, 0.07562580438497114, 0.07937158779376975,
                    0.08317231302441011, 0.08735330808721811, 0.07358366778158001, 0.08250311219509315, 0.08700856340971867,
                    0.08157769926719094, 0.08528324066884506, 0.07688119017810117, 0.08066906512017784, 0.10149935073830134,
                    0.08169787407000006, 0.07585093183233321, 0.08273386577807709, 0.07126821624730934, 0.09955616322931202,
                    0.09444866033579422, 0.07395787393750292, 0.08521285722645434, 0.07058196118389058, 0.08112108266526298,
                    0.07877576245386805, 0.0852875702258579, 0.08437616255598422, 0.09210773604068388, 0.07711603935693168,
                    0.0808807532683033, 0.06182593035051397, 0.09202252655302362, 0.08651605968745311, 0.08105330459989533,
                    0.08540724895114711, 0.0815280072402218, 0.07544611960095673, 0.053648969456891606, 0.04533061575218792,
                    0.039938357246396404, 0.04953389691565473, 0.049493631738456265, 0.055321807573459475, 0.050751200772311364,
                    0.04107741723651029, 0.04796456853901051, 0.047428626267504256, 0.030355264986042633, 0.03586039933138099,
                    0.05578620297921632, 0.039352547861164135, 0.038216512171114325, 0.04710919873709605, 0.03785378696033658,
                    0.05223239981822735, 0.031586309735337256, 0.03573341175365896, 0.0428087310662384, 0.029049863086289898,
                    0.04052527269732271, 0.04525511322141557, 0.035852473425504565, 0.02841761995131141, 0.024496834953705398,
                    0.020954009165530554, 0.030030695248682723, 0.03127072151227195, 0.02224250599278146, 0.028927955959593275,
                    0.023787549338793762, 0.014484063997335213, 0.02618956721242097, -0.0005956950355802421, -0.018970753613515422,
                    -0.002022107707723622, 0.007127848886529847, 0.017619314176849765, -0.06584460294868866, -0.028295432262772303,
                    -0.030952551668467818, -0.027961440026376957, -0.05972458866601293, -0.015100483274251236, -0.07716740338796242,
                    -0.07515946405731826, -0.1054097673030352, -0.14148129513659544, -0.07212971106601258, -0.1512670676214663,
                    -0.06027815342308931, -0.2707811763654741, -0.2917885654491666, -0.26221131651296603, -0.3200440492954251,
                    -0.6985978508646249, -1.1957549617455037]
    
    
    var displacement = [ChartDataEntry]()
    var velocity = [ChartDataEntry]()
    var acceleration = [ChartDataEntry]()
    

    override func viewDidLoad() {
        super.viewDidLoad()
        setUpGraph()
        
        
    }
    
    override func viewWillAppear(_ animated: Bool) {
        UIDevice.current.setValue(UIInterfaceOrientation.landscapeLeft.rawValue, forKey: "orientation")
    }
    
    override var shouldAutorotate: Bool {
        return true
    }
    
    override func viewWillDisappear(_ animated: Bool) {
        //UIDevice.current.setValue(UIInterfaceOrientation.portrait.rawValue, forKey: "orientation")
    }
    
    @IBAction func chartButtonPressed(_ sender: Any) {
        if chatStatus == 2{
            chatStatus = 0}
        else{
            chatStatus += 1}
        
        updateGraph()
        
        
        
    }
    
    func setUpGraph(){
        for i in 0..<time.count {
            let displacementValue = ChartDataEntry(x: time[i], y: pre_distance[i])
            let velocityValue = ChartDataEntry(x: time[i], y: pre_velocity[i])
            let accelerationValue = ChartDataEntry(x: time[i], y: pre_acce[i])
            
            displacement.append(displacementValue)
            velocity.append(velocityValue)
            acceleration.append(accelerationValue)
        }
    }
    func updateGraph(){
        /***
        if chatStatus == 0 {
            let line = LineChartDataSet(entries: displacement, label: "Displacement" )
        }
        else if chatStatus == 1 {
            let line = LineChartDataSet(entries: velocity, label: "Velocity" )
        }
        else if chatStatus == 2 {
            let line = LineChartDataSet(entries: acceleration, label: "Acceleration" )
        }***/
        
        let line = LineChartDataSet(entries: acceleration, label: "Acceleration" )
        line.colors = [NSUIColor.blue]
        
        let data = LineChartData()
        data.addDataSet(line)
        chartView.data = data
        
       
    }
    
    

}
